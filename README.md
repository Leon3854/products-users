# Система управления товарными запасами и пользователями (E-commerce Core)

## Сервисы товаров и истории: Логистический блок.
## Сервис пользователей: CRM-блок.


В данном проекте реализованы два сервиса:

1. **Сервис остатков товаров**: Управляет информацией о товарах и остатках в магазине.
2. **Сервис истории действий с товарами**: Отслеживает события, происходящие с товарами и остатками.

### Сервис остатков товаров

#### Поля товара:
- **PLU**: Артикул товара
- **Название товара**
- **Количество товара на полке**
- **Количество товара в заказе**
- **Магазин, для которого данные остатка**

#### Эндпоинты:
- `POST /products`: Создание товара
- `POST /stocks`: Создание остатка
- `PATCH /stocks/increase`: Увеличение остатка
- `PATCH /stocks/decrease`: Уменьшение остатка
- `GET /stocks`: Получение остатков по фильтрам
  - Параметры: `plu`, `shop_id`, `quantity_on_shelf_min`, `quantity_on_shelf_max`, `quantity_in_order_min`, `quantity_in_order_max`
- `GET /products`: Получение товаров по фильтрам
  - Параметры: `name`, `plu`

### Сервис истории действий с товарами

#### Эндпоинты:
- `GET /history`: Получение истории действий с фильтрами
  - Параметры: `shop_id`, `plu`, `date_min`, `date_max`, `action`
  - Поддерживает постраничную навигацию.

## Технологии

- **СУБД**: PostgreSQL
- **Фреймворк**: Один сервис на JavaScript, другой на TypeScript (не Nest.js).

---

# Задание 2: Сервис управления пользователями

## Описание

В данном задании реализован сервис, который работает с пользователями. База данных может содержать более 1 миллиона пользователей.

#### Поля пользователя:
- **Имя**
- **Фамилия**
- **Возраст**
- **Пол**
- **Проблемы**: boolean (есть ли проблемы у пользователя)

#### Эндпоинты:
- `PATCH /users/resetProblems`: Устанавливает флаг проблемы у пользователей в false и считает количество пользователей, у которых этот флаг был true.

## Технологии

- **Фреймворк**: Nest.js
- **СУБД**: PostgreSQL
- **ORM**: Prisma
- **Фейковые данные**: Используется библиотека `@faker-js/faker` для генерации данных.

---

## Установка и запуск

1. Клонируйте репозиторий:
   ```bash
   git clone <URL_репозитория>
   cd <имя_папки>



